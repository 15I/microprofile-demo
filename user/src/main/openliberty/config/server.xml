<?xml version="1.0" encoding="UTF-8"?>
<server description="${project.build.finalName}">

    <!-- Enable features -->
    <featureManager>
        <feature>javaee-7.0</feature>
        <feature>microProfile-1.3</feature>
    </featureManager>

    <httpEndpoint id="defaultHttpEndpoint"
        httpPort="${openliberty.http.port}"
        httpsPort="${openliberty.https.port}"/>

    <!-- Automatically expand WAR files and EAR files -->
    <applicationManager autoExpand="true" />

    <keyStore id="defaultKeyStore" password="0p3nL1b3ry"/>
    
    <!--<quickStartSecurity userName="admin" userPassword="adminpwd"/>-->

    <basicRegistry id="basic" realm="WebRealm">
        <user name="bob" password="{xor}PTA9Lyg7" />  <!-- bobpwd -->
        <user name="alice" password="{xor}PjM2PDovKDs=" />  <!-- alicepwd -->
        <user name="carl" password="{xor}PD4tMy8oOw==" />   <!-- carlpwd -->

        <group name="admin">
            <member name="bob" />
        </group>

        <group name="user">
            <member name="bob" />
            <member name="alice" />
            <member name="carl" />
        </group>
    </basicRegistry>
    
    <application location="${project.build.directory}/${project.build.finalName}.war" type="war" id="${project.build.finalName}"
                 name="${project.build.finalName}" context-root="/${project.build.finalName}">
        
        <application-bnd>
            <security-role name="admin">
                <group name="admin" />
            </security-role>
            <security-role name="user">
                <group name="user" />
            </security-role>
        </application-bnd>
    </application>
    
    
    <logging traceSpecification="${log.name}.*=${log.level}"/>
    
    <!--<jwtBuilder id="jwtFrontEndBuilder" issuer="${jwt.issuer}" expiry="24h" keyAlias="default" audiences="simpleapp"/>-->
    <!-- The MP JWT configuration that injects the caller's JWT into a ResourceScoped bean for inspection. -->
    <!--<mpJwt id="jwtUserConsumer" keyName="default" audiences="simpleapp" issuer="${jwt.issuer}"/>-->
    
</server>